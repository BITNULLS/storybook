~navbar

<!--Creating Space at the top of the page-->
<div class="row mt-5">
  <div class="col-12 col-md-4 col-sm-3"></div>
  <div class="col"></div>
</div> 

<!--Title of page-->
<div class="Edit_Book">
  <h1 class="text-center mb-5">Edit Book</h1>
</div>

<!--JS to make modal pop up upon opening window-->
<script>
    $(document).ready(function(){
        $("#selectBookModal").modal('show'); 
    });

    function addQ() {
        //$('#createQ').append;
    } 

    function displaySelectedBook(book_id, page_count) {
        $('#selectBookModal').modal('hide');
        for(var page = 1; page < page_count; page++) {
            var pageOption = $('<option value="' + page + '">' + page + '</option>');
            $('#insert-question').append(pageOption);
            var pageIndicator = $('<h4>Page ' + page + '</h4>');

            var singlePage = document.createElement('img');
            singlePage.setAttribute("class", "img-fluid");
            singlePage.setAttribute(
                'src', 
                '/api/storyboard/page/' + book_id + '/' + page
            );
            singlePage.setAttribute("id", "page-" + page);
            $('#book-images-list').append(pageIndicator);
            $('#book-images-list').append(singlePage);
        }
    }

    var quizQuestionsToAdd = [];

    function multChoiceNewQuizQ() {
        let insertAfter = $('#insert-question').val();
        let questionPreview = $('<h1>mult choice</h1>');
        $('#page-' + insertAfter).after(questionPreview);
    } 

    function shortAnswerNewQuizQ() {
        let insertAfter = $('#insert-question').val();
        let questionPreview = $('<h1>short answer</h1>');
        $('#page-' + insertAfter).after(questionPreview);

        //quizQuestionsToAdd.append({
        //    "type": "...", // free response short answer / MC
        //    "question": "..."
        //})
    }

    function submitQuestions() {
        //actually save the questions to the backend
    }
</script>

<!--Modal for selecting a book-->
<div class="modal fade" id="selectBookModal" tabindex="-1" role="dialog" aria-labelledby="selectBookModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="selectBookModalLabel">Select a Book to Edit</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        ~book
      </div>
    </div>
  </div>
</div>

<!--Overall container for pages and quiz questions-->
<div class="container">
    <div class="row">
        <div class="col overflow-auto" style="max-height: 500px" id="book-images-list">
        </div>

        <div class="col container">
            <div class="row">
                <div class="col-md-8">
                    <h4>Add a Quiz Question</h4>
                    <div>
                        <nav class="nav nav-tabs" id="myTab">
                            <a class="nav-link active" href="#MC" role="tab" data-toggle="tab">Multiple Choice</a>
                            <a class="nav-link" href="#SA" data-toggle="tab" role="tab">Short Answer</a>
                        </nav>

                        <label for="where-to-insert-question">Question will be inserted after this page</label>
                        <select class="form-select" id="insert-question">
                            <option disabled selected>Please select a page</option>
                        </select>

                        <div class="tab-content my-tab">
                            <div class="tab-pane active" id="MC">
                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="form-group" id="inserting-question">
                                            <small class="form-text text-muted">Required</small>
                                        </div>
                                        <div class="form-group" id="multiple-choice-form">
                                            <label for="input_MC_question">Enter Your Question</label>
                                            <input type="text" class="form-control" id="input_MC_question" placeholder="???">
                                            <small class="form-text text-muted">Required</small>
                                        </div>
                                        <div class="form-group">
                                            <label for="input_MC_options">Add Answer Choices</label>
                                            <a type="submit" class="btn btn-atts btn-info" id="add-answer-choices" onclick="addSA()">Add Answer Choice</a>                                      
                                            <small class="form-text text-muted">Required</small>
                                        </div>
                                        <button type="submit" class="btn btn-atts btn-info" onclick="multChoiceNewQuizQ()">Add Question</button>
                                    </div>
                                </div>
                            </div>
                            <div class="tab-pane" id="SA">
                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="form-group" id="inserting-question">
                                            <small class="form-text text-muted">Required</small>
                                        </div>
                                        <div class="form-group" id="short-answer-form">
                                            <label for="input_SA_question">Enter Your Question</label>
                                            <input type="text" class="form-control" id="input_SA_question" placeholder="???">
                                            <small class="form-text text-muted">Required</small>
                                        </div>
                                        <div class="form-group">
                                            <label for="input_SA_answer">Answer</label>
                                            <textarea type="text" class="form-control" id="input_SA_answer" placeholder="Please type your response here"></textarea>
                                            <small class="form-text text-muted">Optional</small>
                                        </div>
                                        <button type="submit" class="btn btn-atts btn-info" onclick="shortAnswerNewQuizQ()">Add Question</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div> 

<!--Save and Publish buttons-->
<div class="row mt-3 justify-content--center">
  <div class="col text-center col_atts">
    <a type="button" class="btn btn-atts bg-info" data-toggle="modal" data-target="#selectBookModal">Change Book</a>
    <a type="button" class="btn btn-atts bg-info" role="button" aria-pressed="true" onclick="submitQuestions()">Save & Publish</a>
  </div>  
</div>  
